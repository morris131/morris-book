---
title: 设计模式之单例模式
date: 2018-09-19 10:05:22
categories: 设计模式
tags: [设计模式,单例模式]
---

# 设计模式之单例模式
#### 说明
一个类有且仅有一个实例，并且自行实例化向整个系统提供。

#### 实现
##### 饿汉式单例
[HungerSingleton.java](pattern/src/main/java/com/morris/pattern/singleton/HungerSingleton.java)
```java
package com.morris.pattern.singleton;

/**
 * 
 * 饿汉式单例，类加载时初始化单例对象
 *
 * @author   lian.chen	 
 *
 */
public class HungerSingleton {

	private static HungerSingleton singleton = new HungerSingleton();

	private HungerSingleton() {

	}

	public static HungerSingleton getInstance() {

		return singleton;
	}

}
```

##### 饿汉式单例 静态模块
[StaticBlockHungerSingleton.java](pattern/src/main/java/com/morris/pattern/singleton/StaticBlockHungerSingleton.java)
```java
package com.morris.pattern.singleton;

/**
 * 
 * 饿汉式单例，静态模块
 *
 * @author morris
 *
 */
public class StaticBlockHungerSingleton {

	private static StaticBlockHungerSingleton singleton = null;
	static {
		singleton = new StaticBlockHungerSingleton();
	}

	private StaticBlockHungerSingleton() {
	}

	public static StaticBlockHungerSingleton getInstance() {

		return singleton;
	}

}

```

##### 懒汉式单例
[LazySingleton.java](pattern/src/main/java/com/morris/pattern/singleton/LazySingleton.java)
```java
package com.morris.pattern.singleton;

/**
 * 
 * 懒汉式线程不安全单例类
 * 
 * @author morris
 *
 */
public class LazySingleton {

	private static LazySingleton singleton;

	private LazySingleton() {

	}

	public static LazySingleton getInstance() {

		if (null == singleton) {
			singleton = new LazySingleton();
		}
		return singleton;
	}
}
```

##### 懒汉式单例 同步方法，线程安全
[SyncMethodLazySingleton.java](pattern/src/main/java/com/morris/pattern/singleton/SyncMethodLazySingleton.java)
```java
package com.morris.pattern.singleton;

/**
 * 懒汉式单例类，同步方法，线程安全，效率很低，99%情况下不需要同步。
 * @author morris
 *
 */
public class SyncMethodLazySingleton {

	private static SyncMethodLazySingleton singleton;

	private SyncMethodLazySingleton() {

	}

	public static synchronized SyncMethodLazySingleton getInstance() {

		if (null == singleton) {
			singleton = new SyncMethodLazySingleton();
		}
		return singleton;
	}

}
```

##### 懒汉式静态内部类
[StaticInnerClassSingleton.java](pattern/src/main/java/com/morris/pattern/singleton/StaticInnerClassSingleton.java)
```java
package com.morris.pattern.singleton;

/**
 * 静态内部类，单例，Singleton类被装载了，instance不一定被初始化，达到懒加载。
 *
 * @author morris
 *
 */
public class StaticInnerClassSingleton {

	private static class SingletonHolder {

		private static final StaticInnerClassSingleton INSTANCE = new StaticInnerClassSingleton();
	}

	private StaticInnerClassSingleton() {
	}

	public static final StaticInnerClassSingleton getInstance() {

		return SingletonHolder.INSTANCE;
	}
}

```
##### 枚举单例
[EnumSingleton.java](pattern/src/main/java/com/morris/pattern/singleton/EnumSingleton.java)
```java
package com.morris.pattern.singleton;

/**
 * 
 * 枚举单例，不仅能避免多线程同步问题，而且还能防止反序列化重新创建新的对象
 *
 * @author morris
 *
 */
public enum EnumSingleton {
	INSTANCE;
	
    public void whateverMethod() {  
    }  
}


```

##### 双重同步锁
[DoubleSyncLockSingleton.java](pattern/src/main/java/com/morris/pattern/singleton/DoubleSyncLockSingleton.java)
```java
package com.morris.pattern.singleton;

/**
 * 
 * 双重同步锁
 *
 * @author morris 	 
 *
 */
public class DoubleSyncLockSingleton {

	private volatile static DoubleSyncLockSingleton singleton;

	private DoubleSyncLockSingleton() {
	}

	public static DoubleSyncLockSingleton getSingleton() {

		if (singleton == null) {
			synchronized (DoubleSyncLockSingleton.class) {
				if (singleton == null) {
					singleton = new DoubleSyncLockSingleton();
				}
			}
		}
		return singleton;
	}

}

```